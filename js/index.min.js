AOS.init({offset:120,duration:900});const header=document.querySelector(".header"),burger=document.querySelector(".menu__burger"),menuMobile=document.querySelector(".menu__mobile"),menuMobileItems=menuMobile.querySelectorAll(".menu__list-item"),menuMobileLinks=menuMobile.querySelectorAll(".menu__list-link");burger.addEventListener("click",()=>{burger.classList.toggle("menu__burger--active"),menuMobile.classList.toggle("menu__mobile--open"),document.body.classList.toggle("locked"),burger.classList.contains("menu__burger--active")?(menuMobile.style.top=header.offsetHeight+"px",burger.setAttribute("aria-label","Закрыть меню"),burger.setAttribute("aria-expended","true")):(burger.setAttribute("aria-label","Открыть меню"),burger.setAttribute("aria-expended","false"))}),menuMobileLinks.forEach(e=>{e.addEventListener("click",()=>{burger.classList.contains("menu__burger--active")&&(burger.classList.remove("menu__burger--active"),menuMobile.classList.remove("menu__mobile--open"),document.body.classList.remove("locked"))})});const menuItems=document.querySelectorAll(".menu__list-item"),menuLinks=document.querySelectorAll(".menu__list-link");window.addEventListener("scroll",()=>{let{top:e,bottom:t}=document.querySelector(".hero").getBoundingClientRect();(0===e||t===window.innerHeight)&&(menuItems[0].querySelector(".menu__list-link").classList.remove("menu__list-link--active"),menuMobileItems[0].querySelector(".menu__list-link").classList.remove("menu__list-link--active"));let l=window.scrollY;document.querySelectorAll(".page-section").forEach((e,t)=>{l>=e.offsetTop-window.innerHeight/2&&(menuLinks.forEach(e=>{e.classList.contains("menu__list-link--active")&&e.classList.remove("menu__list-link--active")}),menuItems[t].querySelector(".menu__list-link").classList.add("menu__list-link--active"),menuMobileItems[t].querySelector(".menu__list-link").classList.add("menu__list-link--active"))})});const cards=document.querySelectorAll(".card");cards.forEach(e=>{let t=e,l=t.querySelectorAll(".img-switch__item"),s=t.querySelector(".img-pagination");l.length>1&&l.forEach((e,l)=>{e.dataset.index=l,s.innerHTML+=`<li class="img-pagination__item ${0==l?"img-pagination__item--active":""}" data-index="${l}"></li>`,e.addEventListener("mouseenter",e=>{t.querySelectorAll(".img-pagination__item").forEach(e=>{e.classList.remove("img-pagination__item--active")}),t.querySelector(`.img-pagination__item[data-index="${e.currentTarget.dataset.index}"]`).classList.add("img-pagination__item--active")}),e.addEventListener("mouseleave",()=>{t.querySelectorAll(".img-pagination__item").forEach(e=>{e.classList.remove("img-pagination__item--active")}),t.querySelector('.img-pagination__item[data-index="0"]').classList.add("img-pagination__item--active")})})});const btn=document.querySelector(".select__btn"),selectList=document.querySelector(".select__options-list"),selectItems=selectList.querySelectorAll(".select__options-item"),input=document.querySelector(".select__input");btn.addEventListener("click",e=>{e.preventDefault(),selectList.classList.toggle("select__options-list--visible"),btn.classList.add("select__btn--active")}),selectItems.forEach(e=>{e.addEventListener("click",e=>{e.stopPropagation(),btn.innerText=e.target.innerText,btn.focus(),selectList.classList.remove("select__options-list--visible"),input.value=e.target.dataset.value})}),document.addEventListener("click",e=>{e.target!==btn&&(selectList.classList.remove("select__options-list--visible"),btn.classList.remove("select__btn--active"))}),document.addEventListener("keydown",e=>{("Tab"===e.key||"Escape"===e.key)&&(selectList.classList.remove("select__options-list--visible"),btn.classList.remove("select__btn--active"))});const stepperInput=document.querySelector(".stepper__field"),stepperBtnUp=document.querySelector(".stepper__btn--up"),stepperBtnDown=document.querySelector(".stepper__btn--down");let count=stepperInput.value;function disableUpBtn(e){8==e?stepperBtnUp.classList.add("stepper__btn--disabled"):stepperBtnUp.classList.remove("stepper__btn--disabled")}function disableDownBtn(e){1==e?stepperBtnDown.classList.add("stepper__btn--disabled"):stepperBtnDown.classList.remove("stepper__btn--disabled")}stepperInput.addEventListener("input",e=>{let t=e.currentTarget;"0"===t.value&&(t.value=1),+t.value>8&&(t.value=8),disableUpBtn(count=stepperInput.value),disableDownBtn(count)}),stepperInput.addEventListener("change",e=>{e.currentTarget.value||(e.currentTarget.value=1),disableDownBtn(count=stepperInput.value)}),stepperBtnUp.addEventListener("click",e=>{e.preventDefault(),disableUpBtn(++count),disableDownBtn(count),stepperInput.value=count}),stepperBtnDown.addEventListener("click",e=>{e.preventDefault(),disableUpBtn(--count),disableDownBtn(count),stepperInput.value=count});const questionItems=document.querySelectorAll(".question__item");questionItems.forEach(e=>{e.addEventListener("click",e=>{let t=e.currentTarget,l=t.querySelector(".question__item-control"),s=t.querySelector(".question__item-text");t.classList.toggle("question__item--open"),t.classList.contains("question__item--open")?(l.setAttribute("aria-expended",!0),s.setAttribute("aria-hidden",!1),s.style.maxHeight=s.scrollHeight+"px"):(l.setAttribute("aria-expended",!1),s.setAttribute("aria-hidden",!0),s.style.maxHeight=null)})});const show=document.querySelector(".show-btn"),images=Array.from(document.querySelectorAll(".gallery__item"));let items=5;show.addEventListener("click",()=>{items+=3;let e=images.slice(0,items);e.forEach(e=>{e.style.display="block"}),e.length===images.length&&(show.style.display="none",document.querySelector(".gallery__wrapper").style.paddingBottom=0)});const imgItems=document.querySelectorAll(".gallery__item"),imgBox=document.querySelector(".gallery__wrapper"),fullImg=document.querySelector(".full__img"),closeImg=document.querySelector(".close-img");function init(){let e=new ymaps.Map("map",{center:[57.083431521984735,60.18526438114584],zoom:11});e.controls.remove("geolocationControl"),e.controls.remove("searchControl"),e.controls.remove("trafficControl"),e.controls.remove("zoomControl"),e.behaviors.disable(["scrollZoom"])}imgBox.addEventListener("click",e=>{if(e.target.classList.contains("gallery__item")){let t=getComputedStyle(e.target)["background-image"];document.querySelector(".full__img-item").style.backgroundImage=t,fullImg.style.display="flex",document.body.classList.add("locked")}}),closeImg.addEventListener("click",()=>{fullImg.style.display=null,document.body.classList.remove("locked")}),fullImg.addEventListener("click",e=>{e.target.classList.contains("full__img")&&(fullImg.style.display=null,document.body.classList.remove("locked"))}),ymaps.ready(init);const modals=document.querySelectorAll(".modal"),cabinModal=document.querySelector("#cabin-modal"),bookModal=document.querySelector("#book-modal"),orderModal=document.querySelector("#order-modal"),closeModal=document.querySelectorAll(".modal__close"),closeBtn=document.querySelector(".btn-close"),orderBtn=document.querySelector(".modal__form-btn"),modalBtn=cabinModal.querySelector(".modal__btn"),bookBtn=document.querySelector(".form__btn"),mailInput=document.querySelector("#mail"),errorMessage=document.querySelector(".modal__error-msg");function closeModals(){cabinModal.classList.add("visually-hidden"),bookModal.classList.add("visually-hidden"),orderModal.classList.add("visually-hidden"),document.body.classList.remove("locked"),mailInput.value="",errorMessage.classList.add("visually-hidden")}cards.forEach(e=>{e.addEventListener("click",t=>{let l=e.querySelector(".card__title").innerText,s=e.querySelector(".card__info-descr").innerText,i=Number(e.querySelector(".card__price-value").innerText),n=i+1e3;t.target.classList.contains("card__buttons-more")&&(document.body.classList.add("locked"),cabinModal.classList.remove("visually-hidden"),cabinModal.querySelector(".modal__title").innerText=l,cabinModal.querySelector(".modal__description").innerText=s+" Все удобства включены в стоимость аренды.",cabinModal.querySelector(".modal__price-week").innerText=i,cabinModal.querySelector(".modal__price-weekend").innerText=n),t.target.classList.contains("card__buttons-choose")&&(document.body.classList.add("locked"),bookModal.classList.remove("visually-hidden"))})}),closeModal.forEach(e=>{e.addEventListener("click",()=>closeModals())}),modals.forEach(e=>{e.addEventListener("click",e=>{e.target.classList.contains("modal__container")&&closeModals()})}),closeBtn.addEventListener("click",()=>{orderModal.classList.add("visually-hidden"),document.body.classList.remove("locked")}),modalBtn.addEventListener("click",()=>{cabinModal.classList.add("visually-hidden"),bookModal.classList.remove("visually-hidden")}),bookBtn.addEventListener("click",e=>{e.preventDefault(),input.value&&document.querySelector(".date__field").value&&(bookModal.classList.remove("visually-hidden"),document.body.classList.add("locked"))}),orderBtn.addEventListener("click",e=>{e.preventDefault(),mailInput&&mailInput.value.includes("@")?(bookModal.classList.add("visually-hidden"),orderModal.classList.remove("visually-hidden"),mailInput.value="",errorMessage.classList.add("visually-hidden")):errorMessage.classList.remove("visually-hidden")});